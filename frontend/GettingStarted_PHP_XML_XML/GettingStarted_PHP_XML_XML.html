<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="AUTHOR" content="eBay API Documentation Team">
<link rel="StyleSheet" href="API.css" type="text/css">
<link rel="StyleSheet" href="ss-styles.css" type="text/css">
<link rel="StyleSheet" href="ss-print.css" type="text/css" media="print">
<link rel="StyleSheet" href="task.css" type="text/css">

<title>Getting Started with the Finding API: Finding Items by Keywords</title>

</head>
<body>

<nosearch>
<!-- BEGIN WEBSIDESTORY CODE v3.0.0 (pro-no10)-->
<!-- COPYRIGHT 1997-2003 WEBSIDESTORY, INC. ALL RIGHTS RESERVED. U.S.PATENT No. 6,393,479 B1. Privacy notice at: http://websidestory.com/privacy -->
<script language="javascript">
var _pn="PUT+PAGE+NAME+HERE"; //page name(s)
var _mlc="Documentation"; //multi-level content category
var _cp="null"; //campaign
var _acct="WR57061898MF01EN3"; //account number(s)
var _pndef="title"; //default page name
var _ctdef="full"; //default content category
var _prc=""; //commerce price
var _oid=""; //commerce order
var _dlf=""; //download filter
var _elf=""; //exit link filter
var _epg=""; //event page identifier
var _mn="wp180"; //machine name
var _gn="phg.hitbox.com"; //gateway name
</script><script language="javascript1.1" defer
src="http://stats.hitbox.com/js/hbp-11up.js"></script><script
language="javascript">if(navigator.appName!='netscape'&&navigator.
appVersion.toString().charAt(0)!='3')document.write("<\!"+"--");//"</script><noscript>
<img src="http://phg.hitbox.com/HG?hc=wp180&cd=1&hv=6&ce=u&hb=WR57061898MF01EN3&n=PUT+PAGE+NAME+HERE&vcon=CONTENT+CATEGORY" border='0' width='1' height='1>'
</noscript><!--//-->

<!-- END WEBSIDESTORY CODE  -->
</nosearch>

<a name="top"></a>
<!-- Portal Top -->
<div id="header">
 <div class="pcontent">
  <div id="gnheader" class="gbhdr">
   <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tbody>
     <tr>
      <td>
       <div id="dynamicmenu-hdrCtr" class="hdrCtr">
        <!-- Page Header Container -->
        <div class="pageHeader">
         <a rel="nofollow" id="logo" href="http://developer.ebay.com">
          <img src="i/logoEbayDev_x45_ss.gif" alt="Tap into the largest e-commerce opportunity in the world" border="0" height="48" width="203">
         </a>
         <!-- Page Title -->
          <h1 class="title">
           <span class="title">eBay Finding API</span><br>
           <span class="subtitle">Tutorial</span>
          </h1>
         <!-- End Page Title-->
        </div>
        <!-- End Page Header Container -->
        <!-- Start Global Top Nav -->
        <div class="topNav" align="right" style="padding: 0 0 5px 0;">
         <a href="http://developer.ebay.com/support/">Support</a>
          &nbsp;&nbsp;&nbsp;
         <a href="http://developer.ebay.com/DevZone/support/knowledgebase/">Knowledge Base</a>
          &nbsp;&nbsp;&nbsp;
         <a href="http://developer.ebay.com/community/forums/">Forums</a>
          &nbsp;&nbsp;&nbsp;
         <a href="http://developer.ebay.com/support/docs/tutorials/">All Tutorials</a>
          &nbsp;&nbsp;&nbsp;
         <a href="http://developer.ebay.com/community/featured_projects/?name=Code+Samples+Project">All Code Samples</a>
        </div>
        <!-- End Global Top Nav -->
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
         <tbody>
          <tr>
           <td class="brnd1"></td>
           <td class="brnd2"></td>
           <td class="brnd3"></td>
           <td class="brnd4"></td>
           <td class="brnd5"></td>
           <td class="brnd6"></td>
           <td class="brnd7"></td>
          </tr>
          <tr>
           <td class="brnd8"></td>
           <td class="brnd8"></td>
           <td class="brnd8"></td>
           <td class="brnd8"></td>
           <td class="brnd8"></td>
           <td class="brnd8"></td>
           <td class="brnd8"></td>
          </tr>
         </tbody>
        </table>
        <div class="snav">
         <div class="snavE">
          <div class="snavW">
           <ul id="mainSubNav">
            <li><a href="../../Concepts/FindingAPIGuide.html">Users Guide</a></li>
            <li><a href="../../CallRef/index.html">Call Reference</a></li>
            <li><a href="../../Concepts/MakingACall.html">Making a Call</a></li>
            <li><a href="../index.html">Tutorials</a></li>
            <li><a href="../../ReleaseNotes.html">Release Notes</a></li>
           </ul>
          </div>
         </div>
        </div>
       </div>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
 </div>
 <br>
</div>
<!-- Portal Bottom -->


<a name="_top_"></a>
<h1>Getting Started with the Finding API: Finding Items by Keywords</h1>

<p>This tutorial shows how easy it is to use the eBay Finding API with HTTP POST requests. The tutorial shows you how to build a simple PHP application that submits a <b class="con">findItemsByKeywords</b> call to search for eBay listings based on a keyword query. The code constructs an XML request which is submitted as an HTTP POST call and returns an XML response. The PHP program parses the XML response and constructs a simple HTML page that shows the results of the search.</p>

<p>After completing the tutorial, you'll have an application that displays an HTML page that looks similar to the following when it runs:</p>

<p><img src="GettingStarted_PHP_XML_XML.jpg" alt="Getting Started with the Finding API" width="689" height="471" border="0"></p>

<p>For notes about the tutorial, additional resources, and suggestions for next steps, please see <a href="#next">Notes and Next Steps</a>.</p>
<br><br>


<a name="toc"></a>
<h1>What's in this Tutorial</h1>

<p>This tutorial contains the following sections:</p>

<!-- Update steps in link list for tutorial -->
<ul>
  <li><a href="#code"><strong>Complete Source Code</strong></a></li>
  <li><a href="#prereq"><strong>Before You Begin</strong></a></li>
  <li><a href="#step1"><strong>Step 1: Set up the PHP file</strong></a></li>
  <li><a href="#step2"><strong>Step 2: Construct and make the API call</strong></a></li>
  <li><a href="#step3"><strong>Step 3: Add code to parse and display the call response</strong></a></li>
  <li><a href="#step4"><strong>Step 4: Insert item filters</strong></a></li>
  <li><a href="#step5"><strong>Step 5: Run the code</strong></a></li>
  <li><a href="#next"><strong>Notes and Next Steps</strong></a></li>
  <li><a href="#comments"><strong>User-Contributed Notes</strong></a></li>
</ul>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>


<a name="code"></a>
<h1>Complete Source Code</h1>

<p>The completed code is provided as a downloadable ZIP file, <a href="http://developer.ebay.com/DevZone/finding/HowTo/GettingStarted_PHP_XML_XML/GettingStarted_PHP_XML_XML.zip">GettingStarted_PHP_XML_XML.zip</a>. To run the program, you must replace instances of "MyAppID" in the tutorial code with your own production AppID that you can obtain from the eBay Developer's Program.</p>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>


<a name="prereq"></a>
<h1>Before You Begin</h1>

<p>There are a few prerequisites for completing this tutorial:</p>

<ul>
<li><a href="http://developer.ebay.com/join" target="_blank">Join the eBay Developers Program</a> and get your Access Keys.
<p>Joining is free and you get 5,000 API calls a day just for joining! When you generate your application keys from your <a href="https://developer.ebay.com/DevZone/account/Default.aspx" target="_blank">My Account page</a>, note your Production AppID so you can substitute it in this tutorial where it says "MyAppID." The program in this tutorial makes calls to the eBay production site and makes use of live production data.</p>
</li>

<li>Install <a href="http://httpd.apache.org/download.cgi">Apache HTTP Server</a>.
<p>Apache HTTP Server is a popular web server, capable of running PHP applications. Apache is easy to install and configure. The steps in this tutorial are written with the assumption you are using Apache. PHP is, however, compatible with most popular web servers, so Apache is not strictly required. The tutorial code should run on any web server configured to support PHP.</p>
</li>

<li>Install <a href="http://php.net">PHP 5</a>.
<p>The code for this tutorial is written in PHP. PHP 5 includes the <a href="http://www.php.net/manual/en/ref.simplexml.php" target="_blank">SimpleXML extension</a>, which is required for this tutorial. The tutorial also uses <a href="http://www.php.net/manual/en/book.curl.php">cURL</a> to facilitate connecting and communicating with eBay servers. You must enable the php_curl extension for the tutorial to work.</p>
</li>
</ul>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>

<a name="step1"></a>
<h1>Step 1: Set up the PHP file</h1>

<p>In this step, you set up the basics for your PHP program. This includes setting up the following:</p>

<ul>
  <li>The outline of your PHP file</li>
  <li>The level of error reporting</li>
  <li>The Finding Service endpoint</li>
  <li>The keywords for your query</li>
  <li>The HTML code for displaying the results</li>
</ul>

<ol>
<li><b>Create a new PHP file, <code>MySample.php</code>, with the following code:</b>
  <br><br>
<pre>
&lt;?php

?&gt;

&lt;!-- Build the HTML page with values from the call response --&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;eBay Search Results for &lt;?php echo $query; ?&gt;&lt;/title&gt;
&lt;style type="text/css"&gt;body { font-family: arial,sans-serif;} &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;eBay Search Results for &lt;?php echo $query; ?&gt;&lt;/h1&gt;

&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;
    &lt;?php echo $results;?&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;/body&gt;
&lt;/html&gt;

&lt;?php

?&gt;
</pre>

<p>Save this code in a file titled <code>MySample.php</code> in the DocumentRoot directory of your Apache web server (for example, <code>C:\Program Files\Apache Software Foundation\Apache2.2\htdocs</code>). The file includes PHP containers (<code>&lt;?php ... ?&gt;</code>) where you'll add code that makes an API request and parses the response. It also includes the HTML code that displays the data parsed from the XML response.</p>
</li>

<li><b>Plan the HTTP Header values and the input parameter values for your <b class="con">findItemsByKeywords</b> request.</b>
<br><br>
<table class="indent">
<tr>
  <th width="25%">HTTP Header Name</th>
  <th width="25%">Value</th>
  <th>Description</th>
</tr>
<tr>
  <td>X-EBAY-SOA-OPERATION-NAME</td>
  <td>findItemsByKeywords</td>
  <td>The name of the call you are using.</td>
</tr>
<tr>
  <td>X-EBAY-SOA-SERVICE-VERSION</td>
  <td>1.3.0</td>
  <td>The API version used by your application. You will normally use the latest version of the interface.</td>
</tr>
<tr>
  <td>X-EBAY-SOA-REQUEST-DATA-FORMAT</td>
  <td>XML</td>
  <td>The format of the request. This value can indicate a request formatted as either XML or SOAP.</td>
</tr>
<tr>
  <td>X-EBAY-SOA-GLOBAL-ID</td>
  <td>EBAY-US</td>
  <td>The eBay site you want to search. For example, the eBay US site (<code>EBAY-US</code>) or the eBay Germany site (<code>EBAY-DE</code>).</td>
</tr>
<tr>
  <td>X-EBAY-SOA-SECURITY-APPNAME</td>
  <td><i>AppID</i></td>
  <td>The production AppID you obtain by <a href="http://developer.ebay.com/join" target="_blank">joining the eBay Developers Program</a>. </td>
</tr>
</table>
<br>

<table class="indent">
<tr>
  <th width="25%">Call-Specific Parameter</th>
  <th width="25%">Sample value</th>
  <th>Description</th>
</tr>
<tr>
  <td>keywords</td>
  <td>harry potter</td>
  <td>The string of words you want to match with eBay item information, such as titles. </td>
</tr>
<tr>
  <td>paginationInput.entriesPerPage</td>
  <td>3</td>
  <td>The maximum number of items to return in the response. This is hard-coded as 3 in the program code.</td>
</tr>
</table>
<br>
</li>

<li><b>Add the code to set up the basics of your PHP program.</b>
<p>This code contains the following:</p>
<ul>
<li>The error reporting level for the program.</li>
<li>The <code>$endpoint</code> variable that specifies the service endpoint.</li>
<li>The <code>$query</code> variable that specifies the keywords on which you want to base your query.</li>
</ul>

<p>To set up these items, enter the following code directly after the opening <code>&lt;?php</code> statement at the top of your file:</p>

<pre>
error_reporting(E_ALL);  // Turn on all errors, warnings, and notices for easier debugging

// API request variables
$endpoint = 'http://svcs.ebay.com/services/search/FindingService/v1';  // URL to call
$query = 'harry potter';                  // Supply your own query keywords as needed
</pre>
</li>
</ol>

<p>This first step sets up the basics for your PHP program. Proceed to the next step to add the function that does most of the program's work.</p>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>


<a name="step2"></a>
<h1>Step 2: Construct and make the API call</h1>

<p>In this step you create a function that sets up a session with the service, constructs the call, makes the call, closes the session, and returns the response.</p>

<ol>
<li><b>Add the function to the PHP section at the bottom of the file.</b>

<p>The rest of the steps in this section add code to the function to perform the following tasks:</p>

<ul>
<li>Construct the XML request</li>
<li>Set up the HTTP headers</li>
<li>Set up a cURL session</li>
<li>Make the call</li>
</ul>

<p>Add the following code in side the PHP tags at the bottom of the <code>MySample.php</code> file (<code>&lt;?php ... ?&gt;</code>).</p>

<pre>
function constructPostCallAndGetResponse($endpoint, $query) {
}  // End of constructPostCallAndGetResponse function
</pre>
</li>

<li><b>Add the code to construct the API request.</b>

<p>This PHP code defines the <code>$xmlrequest</code> variable and assigns it values to construct a complete request with a keyword query and pagination.</p>

<p>Add the following code inside the curly braces ("<code>{ }</code>") of the <code>constructPostCallAndGetResponse()</code> function added in the preceding step.</p>

<pre>
  global $xmlrequest;

  // Create the XML request to be POSTed
  $xmlrequest  = "&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n";
  $xmlrequest .= "&lt;findItemsByKeywordsRequest xmlns=\"http://www.ebay.com/marketplace/search/v1/services\"&gt;\n";
  $xmlrequest .= "&lt;keywords&gt;";
  $xmlrequest .= $query;
  $xmlrequest .= "&lt;/keywords&gt;\n";
  $xmlrequest .= "&lt;paginationInput&gt;\n  &lt;entriesPerPage&gt;3&lt;/entriesPerPage&gt;\n&lt;/paginationInput&gt;\n";
  $xmlrequest .= "&lt;/findItemsByKeywordsRequest&gt;";
</pre>
</li>

<li><b>Add the code to create the HTTP headers.</b>

<p>Add the following code just after the last line of the <code>$xmlrequest</code> variable (<code>$xmlrequest&nbsp;.=&nbsp;"&lt;/findItemsByKeywordsRequest&gt;";</code>).</p>

<pre>
  // Set up the HTTP headers
  $headers = array(
    'X-EBAY-SOA-OPERATION-NAME: findItemsByKeywords',
    'X-EBAY-SOA-SERVICE-VERSION: 1.3.0',
    'X-EBAY-SOA-REQUEST-DATA-FORMAT: XML',
    'X-EBAY-SOA-GLOBAL-ID: EBAY-US',
    'X-EBAY-SOA-SECURITY-APPNAME: MyAppID',
    'Content-Type: text/xml;charset=utf-8',
  );
</pre>
</li>

<li><b>Replace <code>MyAppID</code> in the HTTP header code with your Production AppID.</b>
<br><br>
<table class="indent">
<tbody><tr>
<td class="notebox"><b>Important: </b>This tutorial uses the production endpoint for the Finding API, so you must use your production AppID for the application to work. Retrieve your AppID from your <a href="https://developer.ebay.com/DevZone/account/Default.aspx" target="_blank">My Account page</a>. The request will fail if a Sandbox AppID is used.</td>
</tr>
</tbody></table>

<p>In the <code>$headers</code> variable added in the preceding step, replace the "MyAppID" value with your production AppID. </p>

<pre>
    'X-EBAY-SOA-SECURITY-APPNAME: <b>MyAppID</b>',
</pre>
</li>


<li><b>Add the code to define a cURL session.</b>

<p>This code initiates a cURL session and sets the headers and body for the POST request.</p>

<p>Add the following code after the <code>$headers</code> variable (<code>$headers = array( ... );</code>.</p>

<pre>
  $session  = curl_init($endpoint);                       // create a curl session
  curl_setopt($session, CURLOPT_POST, true);              // POST request type
  curl_setopt($session, CURLOPT_HTTPHEADER, $headers);    // set headers using $headers array
  curl_setopt($session, CURLOPT_POSTFIELDS, $xmlrequest); // set the body of the POST
  curl_setopt($session, CURLOPT_RETURNTRANSFER, true);    // return values as a string, not to std out
</pre>
</li>


<li><b>Add the code to make the call and retrieve the response.</b>

<p>The following code starts the cURL session, sending the <code>findItemsByKeywords</code> request via HTTP POST. The result of sending the request is assigned to the <code>$responsexml</code> variable, which is returned by the function for use later. As soon as the response is set, the session is closed. This function will be called by another function in the tutorial.</p>

<p>Add the following code after the last <code>curl_setopt()</code> function added in the preceding step.</p>

<pre>
  $responsexml = curl_exec($session);                     // send the request
  curl_close($session);                                   // close the session
  return $responsexml;                                    // returns a string
</pre>
</li>

<li><b>Save the <code>MySample.php</code> file.</b></li>
</ol>

<p>The tutorial code is not yet ready to run. Proceed to the next step to add the code that submits the API request and parses the response.</p>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>


<a name="step3"></a>
<h1>Step 3: Add code to parse and display the call response</h1>

<p>In this last step, you parse the response returned from the call. Even though each returned item contains a full set of <b class="con">item</b> information, only a few select fields are retrieved from the response.</p>

<ol>
<li><b>Add code to call the <code>constructPostCallAndGetResponse()</code> function and pass the response SimpleXML.</b>

<p>The <code>simplexml_load_string()</code> function calls the <code>constructPostCallAndGetResponse()</code> function. The <code>constructPostCallAndGetResponse()</code> function, which is described in <a href="#step2">Step 2</a>, makes the <b class="con">findItemsByKeyword</b> call and returns the XML response as a string of XML. The <code>simplexml_load_string()</code> function takes the XML string and returns an object, which the remaining code will parse.</p>

<p>Add the following code to the top PHP section, after the <code>$query</code> variable.</p>

<pre>
// Construct the findItemsByKeywords POST call
// Load the call and capture the response returned by the eBay API
// The constructCallAndGetResponse function is defined below
$resp = simplexml_load_string(constructPostCallAndGetResponse($endpoint, $query));
</pre>
</li>

<li><b>Add PHP code to parse the API call response and write the HTML to display the results.</b>

<p>The following PHP code creates rows to add to the HTML table in the HTML body of the <code>MySample.php</code> file. The code loops through the array of items in the search results, adding a new row to the table for each item. Each row consists of the item's gallery image and title. The title links to the item's View Item page.</p>

<p>Add the following code after the <code>simplexml_load_string()</code> function added in the preceding step:</p>

<pre>
// Check to see if the call was successful, else print an error
if ($resp->ack == "Success") {
  $results = '';  // Initialize the $results variable

  // Parse the desired information from the response
  foreach($resp->searchResult->item as $item) {
    $pic   = $item->galleryURL;
    $link  = $item->viewItemURL;
    $title = $item->title;

    // Build the desired HTML code for each searchResult.item node and append it to $results
    $results .= "&lt;tr&gt;&lt;td&gt;&lt;img src=\"$pic\"&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\"$link\"&gt;$title&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;";
  }
}
else {  // If the response does not indicate 'Success,' print an error
  $results  = "&lt;h3&gt;Oops! The request was not successful. Make sure you are using a valid ";
  $results .= "AppID for the Production environment.&lt;/h3&gt;";
}
</pre>
</li>

<li><b>Save the <code>MySample.php</code> file.</b> </li>
</ol>

<p>This file is now runnable, but we're not done yet. Skip ahead to <a href="#step4">Step 4</a> to see what it looks like, or proceed to the next step to add item filters to the request.</p>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>

<a name="step4"></a>
<h1>Step 4: Insert item filters</h1>

<p>This step adds item filters to your request. This is done by first creating a PHP array of the item filters. A function then uses this array to create the proper XML code to be passed in the request.</p>

<p>You can reuse this function or a function like it to process item filters submitted through a web form.</p>


<ol>
<li><b>Create a PHP array of item filters.</b>

 <p>Add the following array into the top PHP section (<code>&lt;?php ... ?&gt;</code>), below the <code>$query</code> variable line you added in <a href="step1">Step 1</a>. This array contains three item filters: MaxPrice, FreeShippingOnly, and ListingType.</p>
<pre>
// Create a PHP array of the item filters you want to use in your request
$filterarray =
  array(
    array(
    'name' => 'MaxPrice',
    'value' => '25',
    'paramName' => 'Currency',
    'paramValue'  => 'USD'),
    array(
    'name' => 'FreeShippingOnly',
    'value' => 'true',
    'paramName' => '',
    'paramValue'  => ''),
    array(
    'name' => 'ListingType',
    'value' => array('AuctionWithBIN','FixedPrice','StoreInventory'),
    'paramName' => '',
    'paramValue'  => ''),
  );
</pre>
</li>

<li><b>Add a function to build the XML for the item filters.</b>

<p>This function parses the item filter array, formats the filters as XML, and assigns their collective value to a variable, <code>$xmlfilter</code>.</p>

<p>Add the following code directly after the array you created in the preceding step (<code>$filterarray&nbsp;=&nbsp;array(&nbsp;...&nbsp;);</code>).</p>

<pre>
// Generates an XML snippet from the array of item filters
function buildXMLFilter ($filterarray) {
  global $xmlfilter;
  // Iterate through each filter in the array
  foreach ($filterarray as $itemfilter) {
    $xmlfilter .= "&lt;itemFilter&gt;\n";
    // Iterate through each key in the filter
    foreach($itemfilter as $key =&gt; $value) {
      if(is_array($value)) {
        // If value is an array, iterate through each array value
        foreach($value as $arrayval) {
          $xmlfilter .= " &lt;$key&gt;$arrayval&lt;/$key&gt;\n";
        }
      }
      else {
        if($value != "") {
          $xmlfilter .= " &lt;$key&gt;$value&lt;/$key&gt;\n";
        }
      }
    }
    $xmlfilter .= "&lt;/itemFilter&gt;\n";
  }
  return "$xmlfilter";
} // End of buildXMLFilter function

// Build the item filter XML code
buildXMLFilter($filterarray);
</pre>
</li>

<li><b>Add the XML filter to the code used to construct the XML request.</b>

<p>Add the following line to the code defining the <code>$xmlrequest</code> variable, directly after the line that adds the closing <b class="con">keywords</b> tag to the request (<code>$xmlrequest&nbsp;.=&nbsp;"&lt;/keywords&gt;\n";</code>). </p>

<pre>
  $xmlrequest .= $xmlfilter;
</pre>
</li>

<li><b>Add the XML filter variable as a parameter for the <code>constructPostCallAndGetResponse()</code> function.</b>

<p>The <code>constructPostCallAndGetResponse()</code> function is defined in the lower PHP section and it is used by the the <code>simplexml_load_string()</code> function in the upper PHP section. In both places, add <b class="con">$xmlfilter</b> to the existing function parameters, <code>$endpoint</code> and <code>$query</code>. </p>

<p>The following code shows the <code>constructPostCallAndGetResponse()</code> function in the upper PHP section with the added <code>$xmlfilter</code> parameter in bold.</p>

<pre>$resp = simplexml_load_string(constructPostCallAndGetResponse($endpoint, $query<b>, $xmlfilter</b>));
</pre>

<p>The following code shows the <code>constructPostCallAndGetResponse()</code> function in the lower PHP section with the added <code>$xmlfilter</code> parameter in bold.</p>

<pre>function constructPostCallAndGetResponse($endpoint, $query<b>, $xmlfilter</b>) {
</pre>
</li>

<li><b>Save the <code>MySample.php</code> file.</b> </li>
</ol>

<p>The <code>MySample.php</code> file is complete! Proceed to the next step to see the results.</p>

<p style="font-size: 80%;"  class="btt"><a href="#top">Back to top</a></p>

<a name="step5"></a>
<h1>Step 5: Run the code</h1>

<p><b>Open the file in a browser (<a href="http://localhost/MySample.php" target="_blank">http://localhost/MySample.php</a>).</b></p>

<p>The result should look similar to the following:</p>

<p><img src="GettingStarted_PHP_XML_XML.jpg" alt="Getting Started with the Finding API" width="689" height="471" border="0"></p>

<p>Congratulations! You have used the eBay Finding API to search for items on eBay and to display the search results to a user.</p>

<p>For information about the business benefits of using the eBay Developers Program and for other important information, please see the <a href="http://developer.ebay.com/businessbenefits/" target="_blank">Business Benefits page</a>.</p>

<p style="font-size: 80%;"  class="btt"><a href="#top">Back to top</a></p>

<a name="next"></a>
<h1>Notes and Next Steps</h1>

<p>This section contains notes about the tutorial and suggestions.</p>


<h2>eBay Partner Network (eBay Affiliate Program)</h2>

<p>You can <strong>earn money with the eBay Partner Network (eBay Affiliate Program)</strong>! Send users to eBay, and earn money for new active users (ACRUs) and successful transactions. For more information, visit the <a href="https://www.ebaypartnernetwork.com" target="_blank">eBay Partner Network</a>. This tutorial contains affiliate-related code. The code is commented-out because affiliate functionality is not available in the Sandbox environment. </p>

<p>For information about the URL parameters for affiliate tracking, see the <a href="http://developer.ebay.com/DevZone/finding/Concepts/FindingAPIGuide.html#useaffiliate">Affiliate Tracking</a> section in the eBay Finding API Users Guide.</p>


<h2>About the Application</h2>

<p>The sample provided with this tutorial was built and tested on a Windows 2000 Server platform using PHP 5.3 for Win32 and Apache 2.2.4 for Windows.</p>


<h2>About the Call</h2>

<p>This tutorial is based on the <b class="con">findItemsByKeywords</b> call. See <a href="http://developer.ebay.com/DevZone/finding/CallRef/findItemsByKeywords.html"><b class="con">findItemsByKeywords</b></a> in the <i>Call Reference</i> for descriptions of all the input and output parameters, call samples, and other information. </p>

<p>If you want your application to display the assembled XML request that is being sent to eBay, add the following PHP/HTML code just before the closing body tag (i.e., &lt;/body&gt;):</p>

<pre class="indent">
&lt;pre&gt;&lt;?php echo htmlentities($xmlrequest);?&gt;&lt;/pre&gt;
</pre>

<p>You can adapt this tutorial code to other Finding API calls easily by changing the value of the <b class="con">X-EBAY-SOA-OPERATION-NAME</b> header, along with the values of the <code>$xmlrequest</code> opening and closing XML call tags. If you want to continue with a keyword search, change the name of the call to any of the other <b class="con">finding</b> calls in the API (with the exception of <b class="con">findItemsByCategory</b> and <b class="con">findItemsByProduct</b>, those do not support keywords as input). Or, modify the program to use another call, with different types of input.</p>


<h2>What's Next</h2>

<p>Here are some suggestions for ways you could modify or extend the tutorial code to learn more about the API and create a more interesting application:</p>

<ul>
  <li>Change the keywords in your query to see how the output is effected</li>
  <li>Modify the application to display additional fields</li>
  <li>Try different input parameters, such as <b class="con">sortOrder</b>, to control the results</li>
  <li>Add more, or different, item filters</li>
  <li>Programmatically populate the item filter array from UI interaction</li>
  <li>Adapt the item filter array and the function that generates the associated XML for use with aspect filters</li>
</ul>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>


<a name="AdditionalResources"></a>
<h2>Additional Resources</h2>

<p>More information about the eBay Finding API is available at these locations:</p>

<ul>
  <li><a href="http://developer.ebay.com/DevZone/finding/CallRef/index.html" target="_blank">Call Reference</a></li>
  <li><a href="http://developer.ebay.com/DevZone/finding/Concepts/FindingAPIGuide.html" target="_blank">Users Guide</a></li>
  <li><a href="http://developer.ebay.com/DevZone/finding/Concepts/MakingACall.html" target="_blank">Making an API Call</a></li>
</ul>

<p style="font-size: 80%;" class="btt"><a href="#top">Back to top</a></p>


<a name="comments"></a>
<h1>User-Contributed Notes</h1>

<p>Share tips or code samples related to this call or document. Questions or observations are also welcome.</p>

<p>eBay employees moderate these notes to ensure they're pertinent to the document and relevant to the community. Your submission will show up for all developers when it's activated by the moderator.</p>

<table cellspacing="0" cellpadding="0" border="0" id="js">
<tr>
  <td rowspan="4" width="95%"><a name="userNotes"></a><script type="text/javascript" src="http://developer.ebay.com/external/module.ashx?type=comments"></script>&nbsp;</td>
  <td height="5%"><a name="rating"></a><script type="text/javascript" src="http://developer.ebay.com/external/module.ashx?type=rating"></script>&nbsp;</td>
</tr>
<tr>
  <td height="5%"><a name="bookmark"></a><script type="text/javascript" src="http://developer.ebay.com/external/module.ashx?type=bookmark"></script>&nbsp;</td>
</tr>
<tr>
  <td height="5%"><a name="tagging"></a><script type="text/javascript" src="http://developer.ebay.com/external/module.ashx?type=tagging"></script>&nbsp;</td>
</tr>
<tr>
  <td>&nbsp;</td>
</tr>
</table>
<br>

<p style="font-size: 80%;"  class="btt"><a href="#top">Back to top</a></p>

<br><br>
<hr>
<br>

<p align="center"><small>&copy; 2009&ndash;2010 eBay Inc. All rights reserved.<br>
eBay and the eBay logo are registered trademarks of eBay Inc.<br>
All other brands are the property of their respective owners.</small></p>

<br>

</body>
</html>
